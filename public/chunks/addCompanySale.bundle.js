(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1290:function(t,e,a){"use strict";a.r(e);var o=a(2),r=a.n(o),s=a(0),i=a(16),n=a.n(i);r.a.component(s.HasError.name,s.HasError);var c={created:function(){this.companyList(),this.balanceList()},data:function(){return{form:new s.Form({type:2,name:"",mobile_no:"",address:"",products:[],AmountTotal:0,paid:0,due:0,company_id:"",paid_by:"select one"}),companies:"",balance:"",error:"",productItems:[],automcomplete:!1,search:"",submitValidation:!0,preview_products:{product_name:"",product_id:"",product_code:"",price:"",quantity:"",total:"",alert_quantity:""}}},methods:{add:function(){var t=this;"string"!=typeof this.form.paid_by?(this.$Progress.start(),this.form.post("/sale/store").then((function(e){t.$Progress.finish(),console.log(e),"SUCCESS"==e.data.status?(console.log(e),t.$router.push({name:"compnaySale"}),t.$toasted.show(e.data.message,{type:"success",position:"top-center",duration:4e3})):t.error="dont saved data. please try again"})).catch((function(e){t.$Progress.finish(),console.log(e),t.error="some thing want to wrong"}))):alert("selecet any balance")},autocompleteSearh:function(){var t=this;this.search.length>=3?(axios.get("/search/product/"+this.search).then((function(e){if("SUCCESS"==e.data.status){var a=e.data.products.data.length,o=0;if(a>=1)for(t.productItems=[];o<a;o++)t.productItems.push(e.data.products.data[o]);else{t.productItems=[],t.productItems.push({name:"No product found",product_code:"404"})}}})).catch((function(t){console.log(t)})),this.automcomplete=!0):this.automcomplete=!1},selectedProduct:function(t){"No product found"!=t.name?(this.automcomplete=!1,this.preview_products.product_name=t.name,this.preview_products.price=t.price,this.preview_products.quantity=1,this.preview_products.product_id=t.id,this.preview_products.product_code=t.product_code,this.search=t.product_code+"-"+t.name,this.total()):alert("please enter product valid code or name")},total:function(){if(this.preview_products.price.length<=0)return this.$toasted.show("sorry! price filed fille up first",{type:"error",position:"top-center",duration:3e3}),void this.$refs.price.focus();var t=this.preview_products.price,e=this.preview_products.quantity;e<=1&&(e=1);var a=t*e;this.preview_products.total=a},productAdd:function(){this.preview_products.price.length<=0?alert("price is empty"):this.preview_products.product_id.length<=0?alert("product id is empty"):this.preview_products.product_code.length<=0?alert("product code is empty"):this.form.company_id.length<=0?alert("select company"):(this.form.products.push(this.preview_products),this.preview_products={product_id:"",product_code:"",product_name:"",price:"",total:"",quantity:"",alert_quantity:""},this.search="",this.totalAmount(),this.amountDue(),this.finalValidation())},finalValidation:function(){this.form.products.length<=0||this.form.company_id.length<=0?this.submitValidation=!0:this.submitValidation=!1},totalAmount:function(){for(var t=0,e=0,a=this.form.products;t<a.length;t++)e+=a[t].price*a[t].quantity;this.form.AmountTotal=e,this.form.due=e},amountDue:function(){var t=this.form.paid,e=this.form.AmountTotal-t;this.form.due=e},cancel:function(t){this.form.products.splice(t,1),this.totalAmount(),this.amountDue(),this.finalValidation()},pDate:function(){var t=new Date,e=t.getMonth()+1,a=t.getDate(),o=t.getFullYear()+"-"+((""+e).length<2?"0":"")+e+"-"+((""+a).length<2?"0":"")+a;this.purchase_date=o},companyList:function(){var t=this;axios.get("/company").then((function(e){console.log(e),"SUCCESS"==e.data.status&&(t.companies=e.data.companies)}))},balanceList:function(){var t=this;axios.get("/api/balance/list").then((function(e){t.balance=e.data.balance}))}},computed:{},components:{datePicker:n.a}},l=(a(773),a(1)),d=Object(l.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("admin-main"),t._v(" "),a("div",{staticClass:"content-wrapper"},[a("section",{staticClass:"content-header"},[a("h1",[a("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"compnaySale"}}},[a("i",{staticClass:"fa fa-arrow-right"})])],1),t._v(" "),t._m(0)]),t._v(" "),a("section",{staticClass:"content"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"box box-primary"},[a("div",{staticClass:"box-header with-border"},[a("h3",{staticClass:"box-title"},[t._v("Add Company Sale ")]),t._v(" "),a("router-link",{staticClass:"btn btn-success",staticStyle:{"margin-left":"25px"},attrs:{to:{name:"addCompany"}}},[t._v("add new company ")])],1),t._v(" "),a("div",{staticClass:"box-body"},[t.error?a("div",{staticClass:"alert-danger alert"},[t._v(t._s(t.error))]):t._e(),t._v(" "),a("div",{staticClass:"product_information"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-2 "},[a("div",{staticClass:"form-group"},[a("label",[t._v("Company")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.company_id,expression:"form.company_id"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"company_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("\n                        Select Company\n                      ")]),t._v(" "),t._l(t.companies,(function(e){return a("option",{domProps:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                      ")])}))],2)])]),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Product_code")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{autocomplete:"off",name:"product",placeholder:"type product code"},domProps:{value:t.search},on:{keyup:t.autocompleteSearh,input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.automcomplete,expression:"automcomplete"}],staticClass:"autocomplete"},[a("ul",{staticClass:"list-group"},t._l(t.productItems,(function(e){return a("li",{staticClass:"list-group-item",on:{click:function(a){return t.selectedProduct(e)}}},[t._v("\n                            "+t._s(e.product_code+"-"+e.name)+"\n                          ")])})),0)])])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Price")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.preview_products.price,expression:"preview_products.price"}],ref:"price",staticClass:"form-control",attrs:{type:"text",name:"price",autocomplete:"off",placeholder:"price"},domProps:{value:t.preview_products.price},on:{keyup:t.total,input:function(e){e.target.composing||t.$set(t.preview_products,"price",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Quantity")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.preview_products.quantity,expression:"preview_products.quantity"}],staticClass:"form-control",attrs:{type:"text",name:"quantity",autocomplete:"off",placeholder:"quantity"},domProps:{value:t.preview_products.quantity},on:{keyup:t.total,input:function(e){e.target.composing||t.$set(t.preview_products,"quantity",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Total")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.preview_products.total,expression:"preview_products.total"}],staticClass:"form-control",attrs:{type:"text",name:"total",autocomplete:"off",placeholder:"total",readonly:""},domProps:{value:t.preview_products.total},on:{input:function(e){e.target.composing||t.$set(t.preview_products,"total",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-lg-1"},[a("button",{staticClass:"btn btn-success btn-sm",staticStyle:{"margin-top":"25px"},on:{click:t.productAdd}},[t._v("\n                      Add\n                    ")])])])]),t._v(" "),t.form.products.length>0?a("div",{staticClass:"product_preview"},[a("table",{staticClass:"table table-hover table-striped table-bordered "},[t._m(1),t._v(" "),a("tbody",[t._l(t.form.products,(function(e,o){return a("tr",[a("td",[t._v(t._s(o))]),t._v(" "),a("td",[t._v("\n                        "+t._s(e.product_code+"-"+e.product_name)+"\n                      ")]),t._v(" "),a("td",[t._v(t._s(e.price))]),t._v(" "),a("td",[t._v(t._s(e.quantity))]),t._v(" "),a("td",[t._v(t._s(e.total))]),t._v(" "),a("td",{staticClass:"text-danger",on:{click:function(e){return t.cancel(o)}}},[a("i",{staticClass:"fa fa-trash"})])])})),t._v(" "),a("tr",[a("td",{attrs:{colspan:"3"}}),t._v(" "),a("td",[t._v("Total Amount")]),t._v(" "),a("td",[t._v(t._s(this.form.AmountTotal))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"3"}}),t._v(" "),a("td",[t._v("Paid")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.paid,expression:"form.paid"}],staticClass:"form-control",attrs:{placeholder:"Paid"},domProps:{value:t.form.paid},on:{keyup:t.amountDue,input:function(e){e.target.composing||t.$set(t.form,"paid",e.target.value)}}})])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"3"}}),t._v(" "),a("td",[t._v("Paid_by")]),t._v(" "),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.paid_by,expression:"form.paid_by"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"paid_by",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"select one",disabled:""}},[t._v("select one")]),t._v(" "),t._l(t.balance,(function(e,o){return a("option",{key:o,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"3"}}),t._v(" "),a("td",[t._v("Amount Due")]),t._v(" "),a("td",[t._v(t._s(t.form.due))])])],2)])]):t._e(),t._v(" "),a("div",{staticClass:"form-group text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.submitValidation,type:"submit"},on:{click:function(e){return t.add()}}},[t._v("\n                Submit\n              ")])])])])])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{staticClass:"breadcrumb"},[e("li",[e("a",{attrs:{href:"#"}},[e("i",{staticClass:"fa fa-dashboard"}),this._v("Dashboard ")])]),this._v(" "),e("li",{staticClass:"active"},[this._v("Sale")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Product")]),t._v(" "),a("th",[t._v("price")]),t._v(" "),a("th",[t._v("quantity")]),t._v(" "),a("th",[t._v("total")]),t._v(" "),a("th",[t._v("X")])])])}],!1,null,"317dbebc",null);e.default=d.exports},216:function(t,e,a){var o=a(774);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(5)(o,r);o.locals&&(t.exports=o.locals)},773:function(t,e,a){"use strict";var o=a(216);a.n(o).a},774:function(t,e,a){(t.exports=a(4)(!1)).push([t.i,"\n.mb-2[data-v-317dbebc] {\r\n  margin-bottom: 5px !important;\n}\n.autocomplete[data-v-317dbebc] {\r\n  max-height: 120px;\r\n  overflow-y: scroll;\r\n  position: absolute;\r\n  width: 100%;\r\n  z-index: 454;\n}\n.autocomplete li[data-v-317dbebc]:hover {\r\n  background: #222d32;\r\n  color: #ffffff;\n}\r\n",""])}}]);